<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dish Dater</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css"> <!-- Verlinkung der style.css -->
</head>
<body>
    <!-- Willkommenscontainer -->
    <div class="container" id="welcome-container">
        <h1>Willkommen bei Dish Dater! üçΩÔ∏è</h1>
        <p>Finde die perfekten Rezepte f√ºr deine Vorlieben und Bed√ºrfnisse. üçùüç≥</p>
        <button id="start-button">Start üöÄ</button>
    </div>

    <!-- Button-Container f√ºr Mahlzeitenauswahl (zun√§chst ausgeblendet) -->
    <div class="button-container" id="buttons-container" style="display:none;">
        <button onclick="playSound()">üç≥ Fr√ºhst√ºck</button>
        <button onclick="playSound()">ü•ó Mittagessen</button>
        <button onclick="playSound()">üç≤ Abendessen</button>
        <button onclick="playSound()">üç™ Snacks</button>
        <button class="einstellungen-button" onclick="playSound(); showSettings()">üîß Einstellungen</button>
    </div>

    <!-- Einstellungscontainer (zun√§chst ausgeblendet) -->
    <div class="settings-container" id="settings-container" style="display:none;">
        <h1>Einstellungen</h1>

        <div class="switch-wrapper">
            <span class="switch-label">Tierisch</span>
            <div class="switch-button" id="switch-animal" onclick="toggleSwitch('switch-animal')">
                <div class="switch-circle"></div>
            </div>
        </div>

        <div class="switch-wrapper">
            <span class="switch-label">Milch</span>
            <div class="switch-button" id="switch-milk" onclick="toggleSwitch('switch-milk')">
                <div class="switch-circle"></div>
            </div>
        </div>

        <p class="description">
            Dish Dater ist auf dem Weg, eine umfangreiche Plattform f√ºr Rezeptempfehlungen und Ern√§hrungsanpassungen zu werden.
        </p>

        <button class="back-button" onclick="playSound(); goBack()">üîô Zur√ºck</button>
    </div>

    <audio id="click-sound" src="https://raw.githubusercontent.com/RichtigerRaul/DISHDATER/main/ddbutton.mp3" preload="auto"></audio>

    <script>
        let tg = window.Telegram.WebApp;

        tg.expand();
        tg.ready();

        // Sicherstellen, dass der Sound beim Klicken abgespielt wird
        function playSound() {
            const sound = document.getElementById('click-sound');
            sound.currentTime = 0;
            sound.play().catch(e => console.log("Fehler beim Abspielen des Sounds:", e));
        }

        // Starten der App
        document.getElementById('start-button').addEventListener('click', function() {
            playSound(); // Sound abspielen
            showNextScreen(); // Willkommensnachricht ausblenden
        });

        // Funktion zum Wechseln zum Men√º (szeneartiger √úbergang)
        function showNextScreen() {
            const welcomeContainer = document.getElementById('welcome-container');
            welcomeContainer.style.opacity = 0; // Ausblenden des Startbildschirms

            setTimeout(() => {
                welcomeContainer.style.display = 'none'; // Nach der Animation vollst√§ndig ausblenden
                const buttonsContainer = document.getElementById('buttons-container');
                buttonsContainer.style.display = 'flex'; // Men√º anzeigen
                buttonsContainer.style.opacity = 1; // Einblenden
            }, 1000); // Wartezeit f√ºr das Ausblenden
        }

        // Initialisieren des Willkommenscontainers
        window.onload = function() {
            const welcomeContainer = document.getElementById('welcome-container');
            welcomeContainer.style.opacity = 1; // Willkommensnachricht einblenden

            // √úberpr√ºfen, ob gespeicherte Einstellungen vorhanden sind
            loadSettings();
        };

        // Einstellungsfenster anzeigen
        function showSettings() {
            document.getElementById('buttons-container').style.display = 'none'; // Men√º ausblenden
            document.getElementById('settings-container').style.display = 'flex'; // Einstellungen anzeigen
        }

        // Zur√ºck zur Men√ºseite
        function goBack() {
            document.getElementById('settings-container').style.display = 'none'; // Einstellungen ausblenden
            document.getElementById('buttons-container').style.display = 'flex'; // Men√º anzeigen
        }

        // Schalter f√ºr die Einstellungen
        function toggleSwitch(id) {
            const switchButton = document.getElementById(id);
            switchButton.classList.toggle('active'); // Zustand √§ndern
            saveSettings(); // Einstellungen speichern
        }

        // Einstellungen in Local Storage speichern
        function saveSettings() {
            const animalSwitch = document.getElementById('switch-animal').classList.contains('active');
            const milkSwitch = document.getElementById('switch-milk').classList.contains('active');

            const settings = {
                animal: animalSwitch,
                milk: milkSwitch
            };

            localStorage.setItem('dishDaterSettings', JSON.stringify(settings));
        }

        // Einstellungen aus Local Storage laden
        function loadSettings() {
            const savedSettings = localStorage.getItem('dishDaterSettings');

            if (savedSettings) {
                const settings = JSON.parse(savedSettings);
                if (settings.animal) {
                    document.getElementById('switch-animal').classList.add('active');
                }
                if (settings.milk) {
                    document.getElementById('switch-milk').classList.add('active');
                }
            }
        }
    </script>
</body>
</html>

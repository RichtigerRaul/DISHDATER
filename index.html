<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dish Dater</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);
            --text-color: #000000;
            --container-bg: rgba(255, 255, 255, 0.9);
            --button-gradient: linear-gradient(45deg, #6a11cb, #2575fc);
            --button-hover-gradient: linear-gradient(45deg, #5b0ecf, #1f6fe8);
            --switch-bg: #f0f2f5;
        }

        body.dark-mode {
            --bg-color: linear-gradient(120deg, #2c3e50 0%, #4ca1af 100%);
            --text-color: #ffffff;
            --container-bg: rgba(0, 0, 0, 0.7);
            --switch-bg: #2c3e50;
        }

        body {
            font-family: 'Roboto', sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background: var(--bg-color);
            color: var(--text-color);
            transition: all 0.3s ease;
        }

        .container, .button-container, .settings-container {
            background-color: var(--container-bg);
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            max-width: 300px;
            width: 100%;
            text-align: center;
            transition: all 0.3s ease;
        }

        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-color);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        #logo {
            width: 200px;
            height: auto;
            margin-bottom: 20px;
        }

        #loading-bar {
            width: 200px;
            height: 10px;
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: 5px;
            overflow: hidden;
        }

        #loading-progress {
            width: 0%;
            height: 100%;
            background-color: #4CAF50;
            transition: width 0.5s ease-in-out;
        }

        #welcome-container {
            animation: fadeIn 1s ease-in-out;
        }

        h1 {
            font-size: 2rem;
            color: var(--text-color);
            margin-bottom: 20px;
            line-height: 1.3;
        }

        p {
            font-size: 1rem;
            color: var(--text-color);
            margin-bottom: 20px;
        }

        button {
            background: var(--button-gradient);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            margin: 10px 0;
            width: 100%;
        }

        button:hover {
            background: var(--button-hover-gradient);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            transform: translateY(-3px);
        }

        button:active {
            transform: translateY(2px);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .button-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .einstellungen-button {
            margin-top: 20px;
        }

        .settings-container {
            display: none;
            flex-direction: column;
            gap: 20px;
            align-items: center;
        }

        .switch-wrapper {
            display: flex;
            justify-content: space-between;
            width: 100%;
            align-items: center;
            padding: 10px;
            background-color: var(--switch-bg);
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .switch-label {
            font-size: 1rem;
            font-weight: 600;
            margin-right: 10px;
            color: var(--text-color);
        }

        .switch-button {
            width: 50px;
            height: 25px;
            position: relative;
            background-color: red;
            border-radius: 25px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .switch-button.active {
            background-color: green;
        }

        .switch-circle {
            position: absolute;
            width: 23px;
            height: 23px;
            top: 1px;
            left: 1px;
            background-color: white;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .switch-button.active .switch-circle {
            left: calc(100% - 24px);
        }

        .description {
            margin-top: 30px;
            font-size: 0.9rem;
            color: var(--text-color);
            text-align: center;
        }

        .back-button {
            margin-top: 20px;
            background-color: #ff4b5c;
        }

        .darkmode-toggle {
            position: fixed;
            top: 10px;
            right: 10px;
            font-size: 24px;
            cursor: pointer;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <!-- Darkmode Toggle -->
    <div class="darkmode-toggle" onclick="toggleDarkMode()">üåì</div>

    <!-- Ladebildschirm -->
    <div id="loading-screen">
        <img id="logo" src="https://raw.githubusercontent.com/RichtigerRaul/DISHDATER/main/ddlogo.jpg" alt="Dish Dater Logo">
        <div id="loading-bar">
            <div id="loading-progress"></div>
        </div>
    </div>

    <!-- Erste Ansicht -->
    <div class="container" id="welcome-container" style="display: none;">
        <h1>Willkommen bei Dish Dater! üçΩÔ∏è</h1>
        <p>Finde die perfekten Rezepte f√ºr deine Vorlieben und Bed√ºrfnisse. üçùüç≥</p>
        <button onclick="showNextScreen()">Start üöÄ</button>
    </div>

    <!-- Zweite Ansicht mit Buttons -->
    <div class="button-container" id="buttons-container" style="display: none;">
        <button onclick="playSound();">üç≥ Fr√ºhst√ºck</button>
        <button onclick="playSound();">ü•ó Mittagessen</button>
        <button onclick="playSound();">üç≤ Abendessen</button>
        <button onclick="playSound();">üç™ Snacks</button>
        <!-- Getrennt platzierter Button f√ºr Einstellungen -->
        <button class="einstellungen-button" onclick="playSound(); showSettings()">üîß Einstellungen</button>
    </div>

    <!-- Einstellungen Ansicht -->
    <div class="settings-container" id="settings-container" style="display: none;">
        <h1>Einstellungen</h1>
        
        <!-- Switch f√ºr Tierisch, standardm√§√üig aktiviert -->
        <div class="switch-wrapper">
            <span class="switch-label">Tierisch</span>
            <div class="switch-button active" id="switch-animal" onclick="toggleSwitch('switch-animal'); playSound()">
                <div class="switch-circle"></div>
            </div>
        </div>

        <!-- Switch f√ºr Milch, standardm√§√üig aktiviert -->
        <div class="switch-wrapper">
            <span class="switch-label">Milch</span>
            <div class="switch-button active" id="switch-milk" onclick="toggleSwitch('switch-milk'); playSound()">
                <div class="switch-circle"></div>
            </div>
        </div>

        <!-- Beschreibung -->
        <p class="description">
            Dish Dater ist auf dem Weg, eine umfangreiche Plattform f√ºr Rezeptempfehlungen und Ern√§hrungsanpassungen zu werden. Auch in der aktuellen Entwicklungsphase bieten wir bereits wertvolle Funktionen, die kontinuierlich erweitert werden. Bleiben Sie dabei und erleben Sie, wie eine innovative App entsteht, die auf Ihre individuellen Bed√ºrfnisse zugeschnitten ist. Wir bedanken uns f√ºr Ihre Geduld und freuen uns, Sie auf dieser Reise mitzunehmen!
        </p>

        <!-- Zur√ºck-Button -->
        <button class="back-button" onclick="playSound(); goBack()">üîô Zur√ºck</button>
    </div>

    <!-- Audio-Elemente f√ºr die Soundeffekte -->
    <audio id="click-sound" src="https://raw.githubusercontent.com/RichtigerRaul/DISHDATER/main/ddbutton.mp3" preload="auto"></audio>
    <audio id="start-sound" src="https://raw.githubusercontent.com/RichtigerRaul/DISHDATER/main/ddstart.mp3" preload="auto"></audio>

    <script>
        let tg = window.Telegram.WebApp;

        // Telegram WebApp Einstellungen
        tg.expand();
        tg.ready();

        // Funktion zum Umschalten des Darkmode
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            playSound();
            updateDarkmodeToggle();
        }

        // Funktion zum Aktualisieren des Darkmode-Toggle-Emojis
        function updateDarkmodeToggle() {
            const darkmodeToggle = document.querySelector('.darkmode-toggle');
            if (document.body.classList.contains('dark-mode')) {
                darkmodeToggle.textContent = 'üåû';
            } else {
                darkmodeToggle.textContent = 'üåì';
            }
        }

        // Funktion zum Simulieren des Ladevorgangs
        function simulateLoading() {
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                document.getElementById('loading-progress').style.width = `${progress}%`;
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        document.getElementById('loading-screen').style.display = 'none';
                        document.getElementById('welcome-container').style.display = 'block';
                    }, 500);
                }
            }, 200);
        }

        // Funktion, um den Click-Sound abzuspielen
        function playSound() {
            const sound = document.getElementById('click-sound');
            sound.currentTime = 0;
            sound.play().catch(function(error) {
                console.log("Soundwiedergabe fehlgeschlagen:", error);
            });
        }

        // Funktion, um den Start-Sound abzuspielen
        function playStartSound() {
            const startSound = document.getElementById('start-sound');
            startSound.play().catch(function(error) {
                console.log("Automatisches Abspielen des Startsounds fehlgeschlagen:", error);
            });
        }

        // Funktion, um zum n√§chsten Bildschirm mit den 5 Buttons zu wechseln
        function showNextScreen() {
            playStartSound();
            document.getElementById('welcome-container').style.display = 'none';
            document.getElementById('buttons-container').style.display = 'flex';
            tg.sendData("Start wurde geklickt!");
        }

        // Funktion, um die Einstellungen anzuzeigen
        function showSettings() {
            document.getElementById('buttons-container').style.display = 'none';
            document.getElementById('settings-container').style.display = 'flex';
        }

        // Funktion, um zur vorherigen Ansicht zur√ºckzukehren
        function goBack() {
            document.getElementById('settings-container').style.display = 'none';
            document.getElementById('buttons-container').style.display = 'flex';
        }

        // Funktion zum Umschalten der Switches
        function toggleSwitch(id) {
            const switchButton = document.getElementById(id);
            switchButton.classList.toggle('active');
        }

        // Debug-Informationen f√ºr Telegram WebApp
        console.log("Telegram WebApp object:", tg);
        console.log("Telegram WebApp version:", tg.version);
        console.log("Platform:", tg.platform);

        // Starten Sie den Ladevorgang, wenn die Seite geladen ist
        window.addEventListener('load', function() {
            simulateLoading();
            updateDarkmodeToggle();
        });
    </script>
</body>
</html>
